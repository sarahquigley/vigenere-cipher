(function(){var a,b,c,d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(a,b){null==a&&(a="zorya"),null==b&&(b="abcdefghijklmnopqrstuvwxyz"),this.decipher=g(this.decipher,this),this.encipher=g(this.encipher,this),this.alphabet=b.split(""),this.key=a.toLowerCase().split("")}return a.prototype.encipher=function(a){var b,c,d,e,f,g,h,i,j,k,l;for(f=[],k=0,j=a.split(""),g=h=0,i=j.length;i>h;g=++h)b=j[g],l=b.toUpperCase()===b,l&&(b=b.toLowerCase()),c=this.alphabet.indexOf(b),-1!==c?(d=this.alphabet.indexOf(this.key[(g-k)%this.key.length]),e=this.alphabet[(c+d)%this.alphabet.length]):(k+=1,e=b),l&&(e=e.toUpperCase()),f.push(e);return f.join("")},a.prototype.decipher=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;for(g=[],l=0,k=a.split(""),h=i=0,j=k.length;j>i;h=++i)b=k[h],m=b.toUpperCase()===b,m&&(b=b.toLowerCase()),c=this.alphabet.indexOf(b),-1!==c?(d=this.alphabet.indexOf(this.key[(h-l)%this.key.length]),f=c-d,0>f&&(f=this.alphabet.length+f),e=this.alphabet[f]):(l+=1,e=b),m&&(e=e.toUpperCase()),g.push(e);return g.join("")},a}(),window.Vigenere=a,d=document.getElementById("vigenere-key"),f=document.getElementById("vigenere-text"),c=document.getElementById("vigenere-encipher"),b=document.getElementById("vigenere-decipher"),e=document.getElementById("vigenere-output"),c.addEventListener("click",function(b){var c,g;return b.preventDefault(),g=new a(d.value),c=g.encipher(f.value),e.innerHTML=c}),b.addEventListener("click",function(b){var c,g;return b.preventDefault(),g=new a(d.value),c=g.decipher(f.value),e.innerHTML=c})}).call(this);